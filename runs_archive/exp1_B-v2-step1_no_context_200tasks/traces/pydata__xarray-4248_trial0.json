{
  "task_id": "pydata__xarray-4248",
  "trial_id": 0,
  "issue_text": null,
  "test_command": "git apply",
  "diff": "diff --git a/xarray/core/dataset.py b/xarray/core/dataset.py\nindex 1a2b3c4..5d6e7f8 100644\n--- a/xarray/core/dataset.py\n+++ b/xarray/core/dataset.py\n@@ -123,6 +123,7 @@ class Dataset:\n         return self._repr_html_()\n \n     def _repr_pretty_(self, p, cycle):\n+        p.text(self._repr_str())\n \n     def __str__(self):\n         return self._repr_str()\n@@ -131,6 +132,15 @@ class Dataset:\n         return self._repr_html_()\n \n     def _repr_str(self):\n+        lines = []\n+        lines.append(f\"<xarray.Dataset>\")\n+        lines.append(f\"Dimensions:  {self.dims}\")\n+        lines.append(\"Coordinates:\")\n+        for coord in self.coords.values():\n+            lines.append(f\"  * {coord.name}, in {coord.attrs.get('units', 'unknown')} ({coord.shape})\")\n+        lines.append(\"Data variables:\")\n+        for var in self.data_vars.values():\n+            lines.append(f\"    {var.name}, in {var.attrs.get('units', 'unknown')} ({var.shape})\")\n         return \"\\n\".join(lines)\n \n     def __len__(self):\ndiff --git a/xarray/core/dataarray.py b/xarray/core/dataarray.py\nindex 9a8b7c6..5d4e3f2 100644\n--- a/xarray/core/dataarray.py\n+++ b/xarray/core/dataarray.py\n@@ -123,6 +123,7 @@ class DataArray:\n         return self._repr_html_()\n \n     def _repr_pretty_(self, p, cycle):\n+        p.text(self._repr_str())\n \n     def __str__(self):\n         return self._repr_str()\n@@ -131,6 +132,15 @@ class DataArray:\n         return self._repr_html_()\n \n     def _repr_str(self):\n+        shape = f\"({', '.join(str(d) for d in self.shape)})\"\n+        units = self.attrs.get('units', 'unknown')\n+        if hasattr(self.data, '_repr_short_'):\n+            data_repr = self.data._repr_short_(length=50)\n+        else:\n+            data_repr = str(self.data)\n+        return f\"{self.name}, in {units} {shape}: {data_repr}\"\n+\n     def __len__(self):\n         return len(self.values)",
  "stdout": "",
  "stderr": "Git Apply Failed: error: corrupt patch at line 54\n",
  "repo_commit": null,
  "docker_image": "swebench/sweb.eval.x86_64:latest",
  "model_config": null,
  "full_result": {
    "task_id": "pydata__xarray-4248",
    "trial_id": 0,
    "model": "Qwen/Qwen2.5-Coder-7B-Instruct",
    "prompt_hash": "9b7db3a18923a304d760886907db4e7a6adb64fa7afec4b0d6b0056371a85c4d",
    "diff": "diff --git a/xarray/core/dataset.py b/xarray/core/dataset.py\nindex 1a2b3c4..5d6e7f8 100644\n--- a/xarray/core/dataset.py\n+++ b/xarray/core/dataset.py\n@@ -123,6 +123,7 @@ class Dataset:\n         return self._repr_html_()\n \n     def _repr_pretty_(self, p, cycle):\n+        p.text(self._repr_str())\n \n     def __str__(self):\n         return self._repr_str()\n@@ -131,6 +132,15 @@ class Dataset:\n         return self._repr_html_()\n \n     def _repr_str(self):\n+        lines = []\n+        lines.append(f\"<xarray.Dataset>\")\n+        lines.append(f\"Dimensions:  {self.dims}\")\n+        lines.append(\"Coordinates:\")\n+        for coord in self.coords.values():\n+            lines.append(f\"  * {coord.name}, in {coord.attrs.get('units', 'unknown')} ({coord.shape})\")\n+        lines.append(\"Data variables:\")\n+        for var in self.data_vars.values():\n+            lines.append(f\"    {var.name}, in {var.attrs.get('units', 'unknown')} ({var.shape})\")\n         return \"\\n\".join(lines)\n \n     def __len__(self):\ndiff --git a/xarray/core/dataarray.py b/xarray/core/dataarray.py\nindex 9a8b7c6..5d4e3f2 100644\n--- a/xarray/core/dataarray.py\n+++ b/xarray/core/dataarray.py\n@@ -123,6 +123,7 @@ class DataArray:\n         return self._repr_html_()\n \n     def _repr_pretty_(self, p, cycle):\n+        p.text(self._repr_str())\n \n     def __str__(self):\n         return self._repr_str()\n@@ -131,6 +132,15 @@ class DataArray:\n         return self._repr_html_()\n \n     def _repr_str(self):\n+        shape = f\"({', '.join(str(d) for d in self.shape)})\"\n+        units = self.attrs.get('units', 'unknown')\n+        if hasattr(self.data, '_repr_short_'):\n+            data_repr = self.data._repr_short_(length=50)\n+        else:\n+            data_repr = str(self.data)\n+        return f\"{self.name}, in {units} {shape}: {data_repr}\"\n+\n     def __len__(self):\n         return len(self.values)",
    "patch_lines_added": 19,
    "patch_lines_removed": 0,
    "files_changed": 2,
    "timestamp": "2026-02-12T16:06:49.179773",
    "seed": 42,
    "repo": "pydata/xarray",
    "base_commit": "98dc1f4ea18738492e074e9e51ddfed5cd30ab94",
    "taxonomy_version": "B-v2",
    "gen_elapsed_sec": 5.663010597229004,
    "stage": "PATCH",
    "stdout": "",
    "stderr": "Git Apply Failed: error: corrupt patch at line 54\n",
    "returncode": 128,
    "timeout": false,
    "elapsed_sec": 0.5579900741577148,
    "test_command": "git apply",
    "success": false,
    "error_type": "PATCH_FAIL",
    "signature": "git_apply_failed",
    "docker_image": "swebench/sweb.eval.x86_64:latest"
  }
}