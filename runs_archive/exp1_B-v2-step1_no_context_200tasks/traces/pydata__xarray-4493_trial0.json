{
  "task_id": "pydata__xarray-4493",
  "trial_id": 0,
  "issue_text": null,
  "test_command": "git apply",
  "diff": "diff --git a/xarray/core/dataset.py b/xarray/core/dataset.py\nindex 333e8dba..b4f5c6d 100644\n--- a/xarray/core/dataset.py\n+++ b/xarray/core/dataset.py\n@@ -110,7 +110,7 @@ class Dataset(Data):\n             if isinstance(value, DataArray):\n                 value = value.data\n             elif isinstance(value, Variable):\n-                value = value.data\n+                value = value._to_backing_array()\n             else:\n                 value = as_compatible_data(value)\n             if name in self.variables:\ndiff --git a/xarray/core/variable.py b/xarray/core/variable.py\nindex 202e925..b4f5c6d 100644\n--- a/xarray/core/variable.py\n+++ b/xarray/core/variable.py\n@@ -202,7 +202,7 @@ class Variable(Dataset):\n             if isinstance(data, (DataArray, Variable)):\n                 return data.data\n             elif isinstance(data, np.ndarray):\n-                return data\n+                return DataArray(data, dims=self.dims, coords=self.coords).data\n             else:\n                 return as_compatible_data(data)",
  "stdout": "",
  "stderr": "Git Apply Failed: error: corrupt patch at line 25\n",
  "repo_commit": null,
  "docker_image": "swebench/sweb.eval.x86_64:latest",
  "model_config": null,
  "full_result": {
    "task_id": "pydata__xarray-4493",
    "trial_id": 0,
    "model": "Qwen/Qwen2.5-Coder-7B-Instruct",
    "prompt_hash": "768bd8412162a57945769478ca59cba070f36211516e5515e0f76d4a83111253",
    "diff": "diff --git a/xarray/core/dataset.py b/xarray/core/dataset.py\nindex 333e8dba..b4f5c6d 100644\n--- a/xarray/core/dataset.py\n+++ b/xarray/core/dataset.py\n@@ -110,7 +110,7 @@ class Dataset(Data):\n             if isinstance(value, DataArray):\n                 value = value.data\n             elif isinstance(value, Variable):\n-                value = value.data\n+                value = value._to_backing_array()\n             else:\n                 value = as_compatible_data(value)\n             if name in self.variables:\ndiff --git a/xarray/core/variable.py b/xarray/core/variable.py\nindex 202e925..b4f5c6d 100644\n--- a/xarray/core/variable.py\n+++ b/xarray/core/variable.py\n@@ -202,7 +202,7 @@ class Variable(Dataset):\n             if isinstance(data, (DataArray, Variable)):\n                 return data.data\n             elif isinstance(data, np.ndarray):\n-                return data\n+                return DataArray(data, dims=self.dims, coords=self.coords).data\n             else:\n                 return as_compatible_data(data)",
    "patch_lines_added": 2,
    "patch_lines_removed": 2,
    "files_changed": 2,
    "timestamp": "2026-02-12T16:06:55.401256",
    "seed": 42,
    "repo": "pydata/xarray",
    "base_commit": "a5f53e203c52a7605d5db799864046471115d04f",
    "taxonomy_version": "B-v2",
    "gen_elapsed_sec": 2.9025044441223145,
    "stage": "PATCH",
    "stdout": "",
    "stderr": "Git Apply Failed: error: corrupt patch at line 25\n",
    "returncode": 128,
    "timeout": false,
    "elapsed_sec": 0.4575326442718506,
    "test_command": "git apply",
    "success": false,
    "error_type": "PATCH_FAIL",
    "signature": "git_apply_failed",
    "docker_image": "swebench/sweb.eval.x86_64:latest"
  }
}